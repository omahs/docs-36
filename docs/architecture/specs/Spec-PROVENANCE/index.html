<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-architecture/specs/Spec-PROVENANCE">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Decentralized Data Provenance | Nevermined Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.nevermined.io/docs/architecture/specs/Spec-PROVENANCE"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Decentralized Data Provenance | Nevermined Documentation"><meta data-rh="true" name="description" content="Decentralized Data Provenance"><meta data-rh="true" property="og:description" content="Decentralized Data Provenance"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.nevermined.io/docs/architecture/specs/Spec-PROVENANCE"><link data-rh="true" rel="alternate" href="https://docs.nevermined.io/docs/architecture/specs/Spec-PROVENANCE" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.nevermined.io/docs/architecture/specs/Spec-PROVENANCE" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://IB2HKPUD05-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Nevermined Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Nevermined Documentation Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S70X8HQFLP"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-S70X8HQFLP",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Nevermined Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.3b95da84.css">
<link rel="preload" href="/assets/js/runtime~main.83f45dc4.js" as="script">
<link rel="preload" href="/assets/js/main.44088340.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/nevermined/nevermined_logo.svg" alt="Nevermined Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/nevermined/nevermined_logo.svg" alt="Nevermined Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/docs/catalog/intro">Catalog</a><a class="navbar__item navbar__link" href="/docs/nevermined-sdk/getting-started">SDK</a><a class="navbar__item navbar__link" href="/docs/tutorials">Tutorials</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/GZju2qScKq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><img src="/nevermined/discord-gray.svg" alt="Discord" class="discord"></a><a href="https://github.com/nevermined-io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><img src="/nevermined/github-gray.svg" alt="Github" class="github"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/catalog/intro">Nevermined Catalog</a><button aria-label="Toggle the collapsible sidebar category &#x27;Nevermined Catalog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/nevermined-sdk/intro">Nevermined SDK</a><button aria-label="Toggle the collapsible sidebar category &#x27;Nevermined SDK&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/cli/">CLI</a><button aria-label="Toggle the collapsible sidebar category &#x27;CLI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/environments/">Environments</a><button aria-label="Toggle the collapsible sidebar category &#x27;Environments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/architecture/">Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/what-can-i-do">What can I do with my assets?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/building-dapps">Building decentralized applications with Nevermined</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/building-blocks">Building Blocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/nevermined-data">Information available in Nevermined</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/architecture/contracts/">Smart Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Smart Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/architecture/marketplace-api/">Marketplace API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Marketplace API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/architecture/specs/">Specs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Specs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-DID">Decentralized Identifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-METADATA">Metadata Ontology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-NFT">NFTs Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-ACCESS">Decentralized Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-COMPUTE">Data in situ Computation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-FL">Federated Learning Orchestration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/architecture/specs/Spec-PROVENANCE">Decentralized Data Provenance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-DTP">Data transfer proofs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-MKT">Marketplace API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-IDM">Identity management with on-chain access control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/examples/">Nevermind Specs Examples</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/architecture/node/">Nevermined Node</a><button aria-label="Toggle the collapsible sidebar category &#x27;Nevermined Node&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/category/smart-contracts">components</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/architecture/"><span itemprop="name">Architecture</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/architecture/specs/"><span itemprop="name">Specs</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Decentralized Data Provenance</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Decentralized Data Provenance</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">shortname:      PROV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name:           Decentralized Data Provenance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type:           Standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:         Valid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version:        0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">editor:         Aitor Argomaniz &lt;aitor@nevermined.io&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contributors:   </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This SPEC introduces the concept of asset Data Provenance in Nevermined platform based on  the W3C Provenance
specification.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">​</a></h2><p>The intention of this document is to discuss how data provenance can be established in a decentralized system,
permitting integrity validation of this provenance information.</p><p>The main objectives of this SPEC are:</p><ul><li>Understand what provenance information needs to be tracked</li><li>Specify how the provenance integrity check is stored on-chain</li><li>Identify the actors involved in the publishing and visualization of provenance information</li><li>Detail how to register relationships between source and derived entities</li><li>Detail how to register activities</li><li>Understand how to associate activities with the input and output entities in a workflow</li><li>Validate cryptographically that an entity was generated from a specific input entity in a specific activity</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concepts">Concepts<a class="hash-link" href="#concepts" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="specifications">Specifications<a class="hash-link" href="#specifications" title="Direct link to heading">​</a></h3><p>Nevermined Data Provenance solution is designed based on the <a href="https://www.w3.org/TR/2013/NOTE-prov-overview-20130430/" target="_blank" rel="noopener noreferrer">W3C Provenance specifications</a>.
In addition to this, Nevermined uses <a href="https://nevermined-io.github.io/docs/#/architecture/specs/did/README" target="_blank" rel="noopener noreferrer">Decentralized Identifiers</a>
following the <a href="https://w3c.github.io/did-core/#overall-architecture" target="_blank" rel="noopener noreferrer">W3C DID specification</a>.</p><p>The design of Nevermined using both specifications is critical because it enables the
construction of a complete and decentralized provenance solution where independent
parties can collaborate in the common problem of delivering goods without relying
on a central party, and providing transparency, complete traceability, efficiency
and a unique source of truth.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="provenance-model">Provenance Model<a class="hash-link" href="#provenance-model" title="Direct link to heading">​</a></h3><p>The W3C PROV specification defines Provenance as:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Provenance is information about entities, activities, and people involved in producing a piece of data or thing, which</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">can be used to form assessments about its quality, reliability or trustworthiness.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The W3C PROV data model includes a core set of types and relations commonly found in provenance tracking for more
specific uses.</p><p>In particular, the data model includes both <code>Type</code> and <code>Relation</code> categories.</p><p><code>Type</code> category contains <code>entity</code>, <code>activity</code> and <code>agent</code> which are core components.
<code>Relations</code> category defines key relationships between different types of  components, which can be mapped into
specific PROV model relations.</p><p><img loading="lazy" alt="PROV Mapping" src="/assets/images/prov-mapping-5e01c0f607246bc9ca6affb5fb05c734.jpg" width="994" height="514" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="provenance-types">Provenance Types<a class="hash-link" href="#provenance-types" title="Direct link to heading">​</a></h4><p>Provenance information can be modeled as the interaction between Agents and Entities related via the Activities
between them:</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="entities">Entities<a class="hash-link" href="#entities" title="Direct link to heading">​</a></h5><p>In PROV, physical, digital, conceptual, or other kinds of things are called entities. Examples of such entities are
assets, a web page, a chart, a spellchecker, etc.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="agents">Agents<a class="hash-link" href="#agents" title="Direct link to heading">​</a></h5><p>An agent takes a role in an activity such that the agent can be assigned some degree of responsibility for the
activity taking place. An agent can be a person, a piece of software, an inanimate object, an organization, or other
entities that may be ascribed responsibility.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="activities">Activities<a class="hash-link" href="#activities" title="Direct link to heading">​</a></h5><p>Activities are how entities come into existence and how their attributes change to become new entities, often making
use of previously existing  entities to achieve this. They are dynamic aspects of the world, such as
actions, processes, etc. For example, if the second version of document D was generated by a translation from the
first version of the document in another language, then this translation is an activity.</p><p><img loading="lazy" src="https://www.w3.org/TR/2013/REC-prov-o-20130430/diagrams/starting-points.svg" alt="PROV E-R" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="provenance-relations">Provenance Relations<a class="hash-link" href="#provenance-relations" title="Direct link to heading">​</a></h4><p>Relations between agents and entities are open but there are some common relations that can be used as reference:</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="generation-register-a-new-entity-generated-by-an-agent-wasgeneratedby">Generation: Register a new entity generated by an agent (wasGeneratedBy)<a class="hash-link" href="#generation-register-a-new-entity-generated-by-an-agent-wasgeneratedby" title="Direct link to heading">​</a></h5><p><code>Generation</code> is the completion of production of a new entity by an activity.
This entity did not exist before generation and becomes available for usage after this generation.</p><p><code>Generation</code>, written <code>wasGeneratedBy(id; e, a, t, attrs)</code> in PROV-N (a notation for provenance aimed at human
consumption), has:</p><ul><li><code>id</code>: an optional identifier for a generation;</li><li><code>entity</code>: an identifier (e) for a created entity. In Nevermined a <strong>DID</strong>;</li><li><code>activity</code>: an optional identifier (a) for the activity that creates
the entity. In Nevermined a <strong>DID</strong>;</li><li><code>time</code>: an optional &quot;generation time&quot; (t), the time at which the
entity was completely created;</li><li><code>attributes</code>: an optional set (attrs) of attribute-value pairs
representing additional information about this generation.</li></ul><p>While each of <code>id</code>, <code>activity</code>, <code>time</code>, and <code>attributes</code> are optional, at least one of them must be present.</p><p><strong>PROV</strong> uses qualified names to identify things for data provenance, which is essentially a shortened representation
of a URI in the form of <code>prefix:localpart</code>.</p><p>Example:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  wasGeneratedBy(did:nv:e1, did:nv:a1, 2019-10-26T21:32:52)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wasGeneratedBy(did:nv:e2, did:nv:a1, 2019-10-26T10:00:00)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above example shows the existence of two generations (with
respective times 2019-10-26T21:32:52 and 2001-10-26T10:00:00), at which
new entities, identified by <code>did:nv:e1</code> and <code>did:nv:e2</code>, were created
by an activity, identified by <code>did:nv:a1</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="derivation-register-relationship-between-source-and-derived-entities-wasderivedfrom">Derivation: register relationship between source and derived entities (wasDerivedFrom)<a class="hash-link" href="#derivation-register-relationship-between-source-and-derived-entities-wasderivedfrom" title="Direct link to heading">​</a></h5><p><code>Derivation</code> is a transformation of an entity into another, an update of
an entity resulting in a new one, or the construction of a new entity
based on a pre-existing entity.</p><p>A <code>derivation</code>, written <code>wasDerivedFrom(id; e2, e1, a, g2, u1, attrs)</code>
in PROV-N, has:</p><ul><li><code>id</code>: an optional identifier for a derivation;</li><li><code>generatedEntity</code>: the identifier (e2) of the <strong>derived entity</strong>
generated by the derivation. In Nevermined a <strong>DID</strong>;</li><li><code>usedEntity</code>: the identifier (e1) of the <strong>source entity</strong> used by the
derivation. In Nevermined a <strong>DID</strong>;</li><li><code>activity</code>: an optional identifier (a) for the activity using and
generating the above entities. In Nevermined a <strong>DID</strong>;</li><li><code>generation</code>: an optional identifier (g2) for the generation involving
the generated entity (e2) and activity (a). In Nevermined a <strong>DID</strong>;</li><li><code>usage</code>: an optional identifier (u1) for the usage involving the used
entity (e1) and activity (a). In Nevermined a <strong>DID</strong>;</li><li><code>attributes</code>: an optional set (attrs) of attribute-value pairs
representing additional information about this derivation.</li></ul><p>The following descriptions are about derivations between <code>did:nv:e1</code> and
<code>did:nv:e2</code>, but no information is provided as to the identity of the
activity (and usage and generation) underpinning the derivation.
In the second line, a type attribute is also provided.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wasDerivedFrom(did:nv:e2, did:nv:e1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasDerivedFrom(did:nv:e2, did:nv:e1, [ prov:type=&quot;physical transform&quot; ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following description expresses that activity <code>did:nv:a</code>, using the
entity <code>did:nv:e1</code> according to usage <code>did:nv:01</code>, derived the entity
<code>did:nv:e2</code> and generated it according to generation <code>did:nv:02</code>.
It is followed by descriptions for generation <code>did:nv:02</code> and usage <code>did:nv:01</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wasDerivedFrom(did:nv:e2, did:nv:e1, did:nv:a, did:nv:02, did:nv:01)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasGeneratedBy(did:nv:02; did:nv:e2, did:nv:a, -)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">used(did:nv:01; did:nv:a, did:nv:e1, -)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With such a comprehensive description of derivation, a program that analyzes provenance can identify the activity
underpinning the derivation, it can identify how the preceding entity <code>did:nv:e1</code> was used by the activity
(e.g. for instance, which argument it was passed, if the activity is the result of a function invocation), and which
output the derived entity <code>did:nv:e2</code> was obtained from (say, for a function returning multiple results).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="association-wasassociatedwith">Association (wasAssociatedWith)<a class="hash-link" href="#association-wasassociatedwith" title="Direct link to heading">​</a></h4><p> <code>Association</code> is an assignment of responsibility to an agent for an activity, indicating that the agent had a role in the activity.</p><p>An association, written <code>wasAssociatedWith(id; a, ag, pl, attrs)</code> in PROV-N, has:</p><ul><li><code>id</code>: an optional identifier for the association between an activity and an agent;</li><li><code>activity</code>: an identifier (a) for the activity;</li><li><code>agent</code>: an optional identifier (ag) for the agent associated with the activity;</li><li><code>plan</code>: an optional identifier (pl) for the plan the agent relied on in the context of this activity;</li><li><code>attributes</code>: an optional set (attrs) of attribute-value pairs representing additional information about this association of this activity with this agent.</li></ul><p>The following examples are about the association between one activity <code>did:nv:ac1</code> and
one agent <code>did:nv:a00</code>. In the second example, a type attribute is also provided.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(did:nv:ac1, did:nv:a00)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(did:nv:ac1, did:nv:a00, [ prov:type=&quot;manufacturing&quot; ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="delegation-actedonbehalfof">Delegation (actedOnBehalfOf)<a class="hash-link" href="#delegation-actedonbehalfof" title="Direct link to heading">​</a></h4><p><code>Delegation</code> is the assignment of authority and responsibility to an agent
(by itself or by another agent) to carry out a specific activity as a delegate
or representative, while the agent it acts on behalf of retains some
responsibility for the outcome of the delegated work.</p><p>A delegation link, written <code>actedOnBehalfOf(id; ag2, ag1, a, attrs)</code> in PROV-N, has:</p><ul><li><code>id</code>: an optional identifier for the delegation link between delegate and responsible;</li><li><code>delegate</code>: an identifier (ag2) for the agent associated with an activity, acting on behalf of the responsible agent;</li><li><code>responsible</code>: an identifier (ag1) for the agent, on behalf of which the delegate agent acted;</li><li><code>activity</code>: an optional identifier (a) of an activity for which the delegation link holds;</li><li><code>attributes</code>: an optional set (attrs) of attribute-value pairs representing additional information about this delegation link.</li></ul><p>In the following example we can see how the agent delegated <code>did:nv:a1</code> acts on
behalf of the <code>did:nv:a2</code> responsible.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> actedOnBehalfOf(did:nv:a1, did:nv:a2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> actedOnBehalfOf(did:nv:a1, did:nv:a2, [ prov:type=&quot;ground transportation&quot; ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="usage-used">Usage (used)<a class="hash-link" href="#usage-used" title="Direct link to heading">​</a></h4><p><code>Usage</code> is the beginning of utilizing an entity by an activity.
Before usage, the activity had not begun to utilize this entity and could not
have been affected by the entity. (Note: This definition is formulated for a
given usage; it is permitted for an activity to use the same entity multiple
times.)</p><p>Given that a usage is the beginning of utilizing an entity, it is instantaneous.</p><p>Usage, written <code>used(id; a, e, t, attrs)</code> in PROV-N, has:</p><ul><li><code>id</code>: an optional identifier for a usage;</li><li><code>activity</code>: an identifier (a) for the activity that used an entity;</li><li><code>entity</code>: an optional identifier (e) for the entity being used;</li><li><code>time</code>: an optional &quot;usage time&quot; (t), the time at which the entity started to be used;</li><li><code>attributes</code>: an optional set (attrs) of attribute-value pairs representing additional information about this usage.</li></ul><p>In the following example we can see how to associate the activity <code>did:nv:ac1</code>
with the usage of the entity <code>did:nv:e1</code> in some specific moment.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> usage(did:nv:ac1, did:nv:e1, now())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> usage(did:nv:ac1, did:nv:e1, now(), [ prov:type=&quot;shipping&quot; ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="activity-register-activities">Activity: Register activities<a class="hash-link" href="#activity-register-activities" title="Direct link to heading">​</a></h4><p>An <code>activity</code> is something that occurs over a period of time and acts upon or with entities; it may include consuming,
processing, transforming, modifying, relocating, using, or generating entities.</p><p>An <code>activity</code>, written <code>activity(id, st, et, [attr1=val1, ...])</code> in  PROV-N, has:</p><ul><li><code>id</code>: an identifier for an activity;</li><li><code>startTime</code>: an optional time (st) for the start of the activity;</li><li><code>endTime</code>: an optional time (et) for the end of the activity;</li><li><code>attributes</code>: an optional set of attribute-value pairs ((attr1, val1), ...) representing additional information
about this activity.</li></ul><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">activity(a1, 2011-11-16T16:05:00, 2011-11-16T16:06:00,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [ ex:host=&quot;server.example.org&quot;, prov:type=&#x27;ex:edit&#x27; ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above example shows the existence of an activity with identifier <code>a1</code>, <code>start time 2011-11-16T16:05:00</code>, and
<code>end time 2011-11-16T16:06:00</code>,  running on <code>host server.example.org</code>, and of <code>type edit</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">​</a></h3><p>Taking into account the relations examples, the scenario where a new asset (entity)
is created (generation), modified (derivation) and used by a third-party entity
can be translated into this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Entity X is associated with the activity of goodCreation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(goodCreation, entityX)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Entity Y is associated with the activity of goodModification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(goodModification, entityY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Entity Z is associated with the activity of goodShipping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(goodShipping, entityZ)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// A newAsset was created yesterday via goodCreation activity (Entity X)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasGeneratedBy(newAsset goodCreation, yesterday())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// The newDerivedAsset was created today from the newAsset via goodModification activity (Entity Y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasDerivedFrom(newDerivedAsset, newAsset, goodModification, today())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// The newDerivedAsset is shipped by Entity Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">used(goodShipping, newDerivedAsset, now())</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="scenario">Scenario<a class="hash-link" href="#scenario" title="Direct link to heading">​</a></h2><p>For describing the architecture we are gonna use as a reference a supply chain use case. In this scenario a company manufacturing some goods needs to deliver them to the final customer. To do that the goods need to be transported by different shipping companies until the goods are handed over to the final recipient.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="actors">Actors<a class="hash-link" href="#actors" title="Direct link to heading">​</a></h3><p>As an example to illustrate the architecture we are gonna describe the scenario with the following 4 different actors:</p><ul><li><strong>Acme Co</strong>. International medical company manufacturing different kind of drugs in the their manufacturing center</li><li><strong>Armadillo Shipping</strong>. Courier doing ground and sea transportation of goods.</li><li><strong>Pigeon Carriers</strong>. Company doing air transportation of goods.</li><li><strong>John Doe</strong>. The end recipient of the goods</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flow">Flow<a class="hash-link" href="#flow" title="Direct link to heading">​</a></h3><p>The end to end scenario includes the following steps:</p><ol><li>Acme Co. manufactures the drug at their manufacturing center</li><li>Acme Co. hands off the product for transfer from Acme to ground transport (Armadillo Shipping) to begin the journey</li><li>Armadillo transports the product from the manufacturer to the air freight provider for overseas shipping</li><li>This may or may not go through a distribution center</li><li>Armadillo hands off the freight to the air freight provider ( Pigeon Carriers)</li><li>The air freight provider will take over the shipping and move the freight to their distribution center at the airport to wait for the cargo to be loaded.</li><li>The cargo is loaded into the plane and transferred to the destination</li><li>The air freight provider will hand off the cargo to the end recipient (John Doe)</li></ol><p><img loading="lazy" alt="Provenance Example Use Case" src="/assets/images/Nevermined_Provenance_Scenario-473da911e2b282bed1a8067a807f07ea.png" width="960" height="540" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data">Data<a class="hash-link" href="#data" title="Direct link to heading">​</a></h3><p>Across the complete supply chain scenario described above different parts of data are generated since the good is manufactured until it is delivered to the end recipient. Here some details about that:</p><ul><li>When the good is created, the manufacturer generates some additional information about the physical asset. This could include documents with asset specifications, details of manufacturing, certificates of quality, etc.</li><li>When the good is handed over to the shipping company there are also other pieces of data generated. For example the receipt signed between the agent handing over the goods and the courier. During the transportation process, some additional data could be generated including temperature, humidity, coordinates, etc.</li><li>When the good is delivered to the end user, both parties sign a delivery receipt. This data is also relevant and necessary for further control.</li></ul><p>Taking into account the above details we can distinguish different kind of data generated:</p><ul><li>Files. Including goods specs, receipts, etc. Each agent in the scenario needs to keep track of files or get access to the files created by others.</li><li>Metadata. Describing the goods or the activities related with the goods during the delivery life-cycle.</li></ul><p>Nevermined provides a decentralized ecosystem where all this data can be registered and shared between all the agents participating during the supply chain process. It enables the registering of the files generated by the supply chain flow, making them available between the agents independently on the underlying technology. Also enable the registering of the metadata associated with the complete flow allowing to provide a complete lineage of the whole process. All this information is recorded in a decentralized backbone that works as a source of truth for all the parties.</p><p>Nevermined doesn’t require to replace the existing supply chain software platforms each agent in the system has. It integrates to them and augments their existing capabilities allowing to make available the relevant data generated to the agents participating during the supply process.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="process">Process<a class="hash-link" href="#process" title="Direct link to heading">​</a></h3><p>Taking into account the Scenario described before, the end to end flow can be detailed in the following steps:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="good-manufacturing">Good Manufacturing<a class="hash-link" href="#good-manufacturing" title="Direct link to heading">​</a></h4><p>Acme Corp. (Manufacturer) has created some goods that need to be delivered to John Doe (End Recipient). Acme uses the supply chain management Oracle SCM platform. When the good is created some relevant data (files, certificates, etc.) is created in the SCM platform. As a complement to that, the good created is registered into Nevermined (via SDK integration). This allows to:</p><ul><li>Identify unequivocally the good created within the supply chain network. This associates a unique Decentralized Identifier (DID) to the good and identifies Acme Corp. as the unique manufacturer of the good, providing the genesis of the goods lineage.</li><li>Register some metadata related with the good created, including date of manufacturing, description, conditions, etc. This metadata is hashed and becomes part of the DID created, avoiding further modifications (like date of manufacturing tamper) without breaking the integrity check of the DID.</li><li>Register the data files as part of the metadata. Typically these files will be stored as part of Acme Corp. SCM system. Nevermined provides a Node that can integrate different backends. These files registered, equally to the metadata are part of the Nevermined integrity check.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="handover-to-carrier">Handover to Carrier<a class="hash-link" href="#handover-to-carrier" title="Direct link to heading">​</a></h4><p>Acme Corp. needs to send the goods manufactured to John Doe. This delivery process needs to involve 2 independent transport companies, Armadillo Shipping that is doing local ground transportation and Pigeon Carriers that is doing air transportation. Pigeon Carriers will deliver the goods to the end recipient.
During this process the following things happen:</p><ul><li>Acme Corp. hands over the goods to Armadillo Shipping. During this process there is a digital signature process where Acme Corp. gets the signature from Armadillo of this hand over process. Acme Corp. registers this in the Nevermined Provenance Registry.</li><li>Armadillo Shipping transports the goods to the airport to hand over to Pigeon Carriers. During the transportation process some data is created including the temperature of the cargo and the coordinates of the complete trip from the Acme factory to the airport. The files with the data generated are uploaded automatically to the Armadillo SCM system. In addition to this the files are registered into Nevermined with a new DID. When Armadillo hands over the goods to Pigeon Carriers, the digital signature accepting the handover is registered in the Provenance Registry.</li></ul><p>The handover between carriers could include multiple steps and companies. Also intermediate storage in delivery centers, goods validation or certification, etc. For sake of simplicity here we only describe a simplistic end to end flow, but in essence a complete scenario involving additional steps could be very similar.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="handover-to-the-end-recipient">Handover to the end recipient<a class="hash-link" href="#handover-to-the-end-recipient" title="Direct link to heading">​</a></h4><p>Pigeon Carriers needs to deliver the goods to John Doe (End Recipient). During this process and very similarly to the above described the following things happens:</p><ul><li>John Doe sings digitally the delivery receipt. Pigeon Carriers. registers this in the Nevermined Provenance Registry.</li><li>John Doe, having the DID of the goods can track end to end the complete provenance record of the asset. Also for each intermediate step can retrieve the data assets associated with the goods and created during the delivery process.</li></ul><p>This makes it possible to track end to end the complete cargo flow involving independent agents. The provenance record is immutable and cryptographically secure, providing a transparent and unique source of truth that can be consulted by all the agents involved during and after the completion of the flow. This could allow John Doe to validate that the temperature of the goods were correct during transportation and using the GPS coordinates the cargo never went through unexpected locations.</p><p><img loading="lazy" alt="Provenance Architecture" src="/assets/images/Nevermined_provenance_architecture-c076e354c4c712ae9e9c262e57b2715b.png" width="960" height="540" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="registry">Registry<a class="hash-link" href="#registry" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="smart-contract">Smart Contract<a class="hash-link" href="#smart-contract" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct DIDRegisterList {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping(bytes32 =&gt; DIDRegister) didRegisters;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes32[] didRegisterIds;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct DIDRegister {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address owner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 lastChecksum;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string  url;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address lastUpdatedBy;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 blockNumberUpdated;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address[] providers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address[] delegates;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct ProvenanceRegistryList {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping(bytes32 =&gt; ProvenanceRegistry) provenanceRegistry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct ProvenanceRegistry {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 did;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 relatedDid;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 activityId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address agentId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address agentInvolvedId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint8   method;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        address lastUpdatedBy;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 blockNumberUpdated;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># DIDRegister</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">owner  | lastChecksum | URL                   | lastUpdatedBy   | blockNumber   | providers     | delegates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------|--------------|-----------------------|-----------------|---------------|---------------|-------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x1234 | 00001        | http://nevermined.io  | 2010            | 100           | [0x10]        | []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0xabab | 12213        | http://nevermined.io  | 2011            | 100           | []            | [0xaa]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ProvenanceRegistry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">did    | relatedDid   | activityId        | agentId           | agentInvolvedId    | method    | lastUpdatedBy     | blockNumber   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------|--------------|-------------------|-------------------|--------------------|-----------|-------------------|-----------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x1234 | 0x5678       | 0xaabb            | 0xccdd            | 0xccbb             | 0         | 2010              | 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0xdddd |              | 0xaabb            | 0xccdd            |                    | 1         | 2011              | 190</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="provenance-registry">Provenance Registry<a class="hash-link" href="#provenance-registry" title="Direct link to heading">​</a></h4><p>The Provenance Registry provides a unique source truth of the provenance information registered in the Nevermined network. It is a generic record where the entities (digital or physical assets) represent their complete life-cycle. When it’s necessary to represent the interaction between independent agents (Acme Corp. hands over a good to Armadillo Shipping), it’s necessary to provide the digital signature of the agents participating in the transaction.</p><p>Using the scenario already described and the W3C PROV specification the complete flow could be described as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Acme Corp. manufacture some stuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(acmeStuffManufacturing, Acme)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Armadillo does ground transportation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(armadilloGroundTransport, Armadillo)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Pigeon does air transportation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasAssociatedWith(pigeonAirTransport, Pigeon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Stuff X is created by the action acmeStuffManufacturing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wasGeneratedBy(stuffX, acmeStuffManufacturing, timestamp)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Acme hands off the drugs to Armadillo for ground transportation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actedOnBehalfOf(Armadillo, Acme, [prov:type=&quot;ground transportation&quot; ])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Armadillo transport the stuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">used(armadilloGroundTransport, stuffX)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Armadillo hands off the drugs to Pigeon for air transportation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actedOnBehalfOf(Pigeon, Armadillo, [prov:type=&quot;air transportation&quot; ])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Pigeon transport the stuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">used(pigeonGroundTransport, stuffX)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Pigeon delivers the stuff to John</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actedOnBehalfOf(John, Pigeon, [prov:type=&quot;delivery&quot; ])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="metadata-registry">Metadata Registry<a class="hash-link" href="#metadata-registry" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="agents-registry">Agents Registry<a class="hash-link" href="#agents-registry" title="Direct link to heading">​</a></h5><p>All the different actors (Agents in PROV terminology) have associated a digital identity allowing their identification and further authorization and authentication in the network. In Nevermined all the different entities can be registered as a DID. In our example:</p><ul><li>Acme Corp - <code>did:nv:acme</code></li><li>Armadillo Shipping - <code>did:nv:armadillo</code></li><li>Pigeon Carriers - <code>did:nv:pigeon</code></li><li>John Doe - <code>did:nv:john</code></li></ul><p>The different agents DIDs can be resolved to DDOs including the user metadata:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;@context&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://www.w3.org/ns/did/v1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;did:nv:acme&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;proof&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;created&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2019-02-08T08:13:41Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;creator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x37BB53e3d293494DE59fBe1FF78500423dcFd43B&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;signatureValue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;did:nv:0bc278fee025464f8012b811d1bce8e22094d0984e4e49139df5d5ff7a028bdf&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DDOIntegritySignature&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;checksum&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;0&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x52b5c93b82dd9e7ecc3d9fdf4755f7f69a54484941897dc517b4adfe3bbc3377&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;verifiableCredential&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;@context&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;https://www.w3.org/2018/credentials/v1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;https://www.w3.org/2018/credentials/examples/v1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1872&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;read&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;update&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deactivate&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;issuer&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x610D9314EDF2ced7681BA1633C33fdb8cF365a12&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;issuanceDate&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2019-01-01T19:73:24Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;credentialSubject&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x37BB53e3d293494DE59fBe1FF78500423dcFd43B&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;proof&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;RsaSignature2018&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;created&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2019-01-01T19:73:24Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;proofPurpose&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;assertionMethod&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;signatureValue&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ABCJSDAO23...1tzjn4w==&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;service&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;index&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;serviceEndpoint&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://localhost:5000/api/v1/metadata/agents/ddo/{did}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;metadata&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;attributes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;main&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Acme Corp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;subjectAddress&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0x37BB53e3d293494DE59fBe1FF78500423dcFd43B&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;dateCreated&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2019-02-08T08:13:49Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;datePublished&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2019-02-08T08:13:49Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The registration of an identity in the network requires the following steps:</p><ol><li>Generates the agent DDO</li><li>Generates the DID using the DDO main metadata</li><li>Register the DDO off-chain in any kind of metadata service using the Nevermined Metadata interface</li><li>Register the DID on-chain calling the Smart Contract <code>DIDRegistry</code> associating the DID with the url where the DDO is resolved</li></ol><p>Using this method, different and totally independent actors of the supply chain scenario can register their digital identity in the network and be discovered/resolvable via the DID on-chain and the agent metadata.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="entities-registry">Entities Registry<a class="hash-link" href="#entities-registry" title="Direct link to heading">​</a></h5><p>In the same way that agents are registered in Nevermined, all the different assets (Entities in PROV terminology) are registered as part of the network and have associated a DID and some metadata in DDO format. This inherits all the benefits of using Decentralized Identifiers, including the integrity validation of metadata associated with an entity.</p><p>In the <a href="/docs/architecture/specs/Spec-METADATA">Nevermined Metadata specification</a>, a DDO includes some services that are included in the entity/asset registered in the network. Typically this list of services can include:</p><ul><li>Metadata - Information describing the entity. Depending on the type of entity this could be information of a dataset, a physical object, etc. Some attributes here could be description of the entity, owner, date of creation, author, etc.</li><li>Digital Access - For digital entities allowing sharing between agents of the network. This service includes the conditions allowing this transaction to happen.</li><li>Computation - For digital entities with privacy constraints where the agent owner of the digital asset allows to execute a computation where the digital entity is. This could be a Federated Learning job or a classical data pipeline.</li><li>Provenance. It allows to register the activities and metadata related with an entity. The provenance information is associated with the DDO and is part of the integrity signature of the asset. This provenance metadata is complemented with the on-chain provenance registry.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="provenance-metadata-integrity">Provenance metadata integrity<a class="hash-link" href="#provenance-metadata-integrity" title="Direct link to heading">​</a></h3><p>To guarantee the integrity of the provenance information, the complete <code>provenance</code> JSON object inside of the
<code>Provenance</code> service is serialized and hashed using <code>keccak256</code>.</p><p>This generated checksum will be stored as part of the Provenance service in the <code>checksum</code> attribute.</p><p>Additionally, this checksum can be registered on-chain to prevent the tampering of provenance information. Also this
checksum can be used as part of the DID computation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-compute-the-provenance-checksum">How to compute the provenance checksum<a class="hash-link" href="#how-to-compute-the-provenance-checksum" title="Direct link to heading">​</a></h4><p>To generate the checksum in a way that can be computed and verified multiple times, the JSON object must be serialized
using the following rules:</p><ul><li>All the \n, \t, \r characters must be removed</li><li>All the whitespaces out of the Json entities names or values must be removed</li><li>The Json document and all the nested objects must be sort alphabetically</li></ul><p>This must generate a compact JSON object of only one line that can be hashed and the verification of the hash can be
re-calculated.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="links">Links<a class="hash-link" href="#links" title="Direct link to heading">​</a></h2><ul><li>W3C PROV-O - The Provenance Ontology: <a href="https://www.w3.org/TR/2013/NOTE-prov-xml-20130430/" target="_blank" rel="noopener noreferrer">https://www.w3.org/TR/2013/NOTE-prov-xml-20130430/</a></li><li>W3C PROV-DM - The Provenance Data Model: <a href="https://www.w3.org/TR/2013/REC-prov-dm-20130430/" target="_blank" rel="noopener noreferrer">https://www.w3.org/TR/2013/REC-prov-dm-20130430/</a></li><li>W3C PROV-XML: <a href="https://www.w3.org/TR/2013/NOTE-prov-xml-20130430/" target="_blank" rel="noopener noreferrer">https://www.w3.org/TR/2013/NOTE-prov-xml-20130430/</a></li><li>W3C PROV-JSON Serialization: <a href="https://www.w3.org/Submission/prov-json/" target="_blank" rel="noopener noreferrer">https://www.w3.org/Submission/prov-json/</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resource-open-provenance-model-opm">Resource: Open Provenance Model (OPM)<a class="hash-link" href="#resource-open-provenance-model-opm" title="Direct link to heading">​</a></h4><p>The Open Provenance Model (<a href="https://openprovenance.org/" target="_blank" rel="noopener noreferrer">OPM</a>) defines a data model that is open from an
inter-operability viewpoint but also with respect to the community of its contributors, reviewers and users.</p><p><img loading="lazy" alt="Open Provenance Model" src="/assets/images/opm-d7347d04b88e1b9700db9b86d80cbaff.jpg" width="1109" height="327" class="img_ev3q"></p><p>It has several tools &amp; libraries:</p><ul><li><a href="https://github.com/lucmoreau/ProvToolbox" target="_blank" rel="noopener noreferrer">ProvToolbox</a> - a Java toolbox for handling PROV
<a href="https://lucmoreau.github.io/ProvToolbox/" target="_blank" rel="noopener noreferrer">Tutorial</a></li><li><a href="http://pypi.python.org/pypi/prov" target="_blank" rel="noopener noreferrer">Prov Python</a> - a Python implementation of the PROV data model<ul><li><a href="https://trungdong.github.io/prov-python-short-tutorial.html" target="_blank" rel="noopener noreferrer">tutorial</a></li><li><a href="https://nbviewer.jupyter.org/github/trungdong/notebooks/blob/master/PROV%20Tutorial.ipynb" target="_blank" rel="noopener noreferrer">ipynb notebook example</a></li><li><a href="https://prov.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">document</a></li></ul></li><li><a href="https://bitbucket.org/provenance/provjs" target="_blank" rel="noopener noreferrer">ProvJS</a> - a JavaScript implementation of the PROV data model</li><li><a href="https://openprovenance.org/store/" target="_blank" rel="noopener noreferrer">ProvStore</a> - Provenance storage and distribution</li><li><a href="https://openprovenance.org/tools/extract/" target="_blank" rel="noopener noreferrer">ProvExtract</a> - for dealing with PROV embedded in web pages</li><li><a href="https://openprovenance.org/vis/" target="_blank" rel="noopener noreferrer">ProvVis</a> - experimental visualizations of PROV</li><li><a href="https://openprovenance.org/tools/editor/" target="_blank" rel="noopener noreferrer">PROV-N Editor</a> - a text editor with PROV-N syntax highlighted</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nevermined-io/docs/tree/main/docs/architecture/specs/Spec-PROVENANCE.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/architecture/specs/Spec-FL"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Federated Learning Orchestration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/architecture/specs/Spec-DTP"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data transfer proofs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#concepts" class="table-of-contents__link toc-highlight">Concepts</a><ul><li><a href="#specifications" class="table-of-contents__link toc-highlight">Specifications</a></li><li><a href="#provenance-model" class="table-of-contents__link toc-highlight">Provenance Model</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#scenario" class="table-of-contents__link toc-highlight">Scenario</a><ul><li><a href="#actors" class="table-of-contents__link toc-highlight">Actors</a></li><li><a href="#flow" class="table-of-contents__link toc-highlight">Flow</a></li></ul></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a><ul><li><a href="#data" class="table-of-contents__link toc-highlight">Data</a></li><li><a href="#process" class="table-of-contents__link toc-highlight">Process</a></li><li><a href="#registry" class="table-of-contents__link toc-highlight">Registry</a></li><li><a href="#provenance-metadata-integrity" class="table-of-contents__link toc-highlight">Provenance metadata integrity</a></li></ul></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/architecture">Architecture</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials">Tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/nevermined-io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCaDKPgnEk4ekvQo2vO6FIBQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:info@nevermined.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><ul class="social-links">
                  <li>
                    <a href="https://discord.gg/GZju2qScKq" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/discord.svg" alt="Discord" class="discord">
                    </a>
                  </li>
                  <li>
                    <a href="https://github.com/nevermined-io" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/github.svg" alt="Github" class="github">
                    </a>
                  </li>
                  <li>
                    <a href="https://twitter.com/nevermined_io" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/twitter.svg" alt="Twitter" class="twitter">
                    </a>
                  </li>
                  <li>
                    <a href="https://medium.com/nevermined-io" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/medium.svg" alt="Medium" class="medium">
                    </a>
                  </li>
                </ul></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Nevermined AG.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.83f45dc4.js"></script>
<script src="/assets/js/main.44088340.js"></script>
</body>
</html>